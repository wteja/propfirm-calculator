import{r as g,a as je,R as J,C as ge,b as K,X,Y as Z,T as Y,c as L,L as Q,d as be,A as ve,e as Ne,B as we,f as ke,g as De}from"./recharts-CEL1sFxL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}})();var ie={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re=g,Te=Symbol.for("react.element"),Pe=Symbol.for("react.fragment"),Ce=Object.prototype.hasOwnProperty,Me=Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Se={key:!0,ref:!0,__self:!0,__source:!0};function le(r,s,i){var t,a={},n=null,d=null;i!==void 0&&(n=""+i),s.key!==void 0&&(n=""+s.key),s.ref!==void 0&&(d=s.ref);for(t in s)Ce.call(s,t)&&!Se.hasOwnProperty(t)&&(a[t]=s[t]);if(r&&r.defaultProps)for(t in s=r.defaultProps,s)a[t]===void 0&&(a[t]=s[t]);return{$$typeof:Te,type:r,key:n,ref:d,props:a,_owner:Me.current}}W.Fragment=Pe;W.jsx=le;W.jsxs=le;ie.exports=W;var e=ie.exports,ce,ee=je;ce=ee.createRoot,ee.hydrateRoot;/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oe=(...r)=>r.filter((s,i,t)=>!!s&&t.indexOf(s)===i).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=g.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:t,className:a="",children:n,iconNode:d,...c},h)=>g.createElement("svg",{ref:h,...Fe,width:s,height:s,stroke:r,strokeWidth:t?Number(i)*24/Number(s):i,className:oe("lucide",a),...c},[...d.map(([m,u])=>g.createElement(m,u)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=(r,s)=>{const i=g.forwardRef(({className:t,...a},n)=>g.createElement(ze,{ref:n,iconNode:s,className:oe(`lucide-${Ae(r)}`,t),...a}));return i.displayName=`${r}`,i};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=y("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=y("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=y("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=y("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=y("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=y("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=y("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=y("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=y("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=y("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=y("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=y("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=y("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=y("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ze="https://github.com/wteja/propfirm-calculator";function Ye({size:r=16}){return e.jsx("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844a9.59 9.59 0 0 1 2.504.337c1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.02 10.02 0 0 0 22 12.017C22 6.484 17.522 2 12 2z"})})}function Qe(){return e.jsx("header",{className:"sticky top-0 z-50 bg-slate-950/90 backdrop-blur-sm border-b border-slate-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-14 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center flex-shrink-0",children:e.jsx(q,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-white leading-none",children:"PropFirm Risk Calculator"}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Professional risk management tool"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"badge bg-emerald-900/60 text-emerald-400 border border-emerald-800 hidden sm:inline-flex",children:"Offline Ready"}),e.jsx("a",{href:Ze,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"View on GitHub",children:e.jsx(Ye,{size:17})})]})]})})}function M({label:r,hint:s,children:i,className:t=""}){return e.jsxs("div",{className:`flex flex-col gap-1.5 ${t}`,children:[e.jsx("label",{className:"text-xs font-medium text-slate-400 uppercase tracking-wide",children:r}),i,s&&e.jsx("p",{className:"text-xs text-slate-500",children:s})]})}function S({value:r,onChange:s,min:i,max:t,step:a=1,prefix:n,suffix:d,placeholder:c}){return e.jsxs("div",{className:"relative flex items-center",children:[n&&e.jsx("span",{className:"absolute left-3 text-slate-400 text-sm pointer-events-none",children:n}),e.jsx("input",{type:"number",value:r,min:i,max:t,step:a,placeholder:c,onChange:h=>{const m=parseFloat(h.target.value);isNaN(m)||s(m)},className:`input-base ${n?"pl-7":""} ${d?"pr-10":""}`}),d&&e.jsx("span",{className:"absolute right-3 text-slate-400 text-sm pointer-events-none",children:d})]})}function es({value:r,onChange:s,options:i}){return e.jsx("select",{value:r,onChange:t=>s(t.target.value),className:"input-base cursor-pointer",children:i.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})}const _={id:"default",name:"My Account",accountBalance:1e5,dailyDrawdownPct:5,maxDrawdownPct:10,profitTargetPct:10,consistencyRulePct:20,consistencyRuleEnabled:!1,winRate:60,riskRewardRatio:2,tradesPerDay:3,mode:"normal",customRiskPerTrade:0};function U(r){const{accountBalance:s,dailyDrawdownPct:i,maxDrawdownPct:t,profitTargetPct:a,consistencyRulePct:n,consistencyRuleEnabled:d,winRate:c,riskRewardRatio:h,tradesPerDay:m,mode:u,customRiskPerTrade:o}=r,l=c/100,x=s*(i/100),p=s*(t/100),j=s*(a/100),v=d?j*(n/100):1/0,D=Math.min(p/5,x/3,p/8);let N;u==="custom"?N=o>0?o:D:u==="conservative"?N=D/1.5:u==="aggressive"?N=D*1.2:N=D;const R=N*h,b=l*R-(1-l)*N,w=b>0?Math.ceil(j/b):1/0,C=w===1/0?1/0:Math.ceil(w/m),F=N/s*100;let z=100;if(b>0){const O=(1-l)/(l*h),ye=Math.floor(p/N);z=O<1?Math.min(100,Math.pow(O,ye)*100):100}const P=[];return b<=0&&P.push({type:"danger",message:"Negative expectancy — this strategy will lose money over time. Increase win rate or R:R ratio."}),N*5>=p&&P.push({type:"danger",message:"Five consecutive losses will breach your Max Drawdown limit."}),F>1&&t<8&&P.push({type:"danger",message:`Risk per trade (${F.toFixed(2)}%) is too high relative to Max DD (${t}%). Reduce risk immediately.`}),z>25&&P.push({type:"warning",message:`Risk of Ruin is ${z.toFixed(1)}%. Consider reducing position size.`}),u==="aggressive"&&P.push({type:"warning",message:"Aggressive mode increases risk by 20%. Monitor drawdown carefully."}),u==="custom"&&o>D*1.2&&P.push({type:"warning",message:`Custom risk $${o.toFixed(0)} exceeds the recommended safe limit of $${(D*1.2).toFixed(0)}.`}),d&&n<30&&a>0&&P.push({type:"info",message:`Tight consistency rule (${n}%) — no single winning day should exceed $${v.toFixed(0)}.`}),{dailyDD:x,maxDD:p,profitTarget:j,maxDailyProfit:v,baseRisk:D,safeRiskPerTrade:N,rewardPerTrade:R,expectancy:b,estimatedTradesToTarget:w,estimatedDaysToTarget:C,riskOfRuin:z,riskPct:F,warnings:P}}function f(r){return isFinite(r)?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(r):"∞"}function A(r,s=0){return isFinite(r)?r.toFixed(s):"∞"}function k(r,s=2){return isFinite(r)?`${r.toFixed(s)}%`:"∞%"}const ss=[{value:"conservative",label:"Conservative (Risk ÷ 1.5)"},{value:"normal",label:"Normal"},{value:"aggressive",label:"Aggressive (Risk × 1.2)"},{value:"custom",label:"Custom (enter $ amount)"}];function ts({config:r,onChange:s}){const i=(a,n)=>s({...r,[a]:n}),t=(()=>{const a=r.accountBalance*(r.dailyDrawdownPct/100),n=r.accountBalance*(r.maxDrawdownPct/100);return Math.min(n/5,a/3,n/8)})();return e.jsxs("div",{className:"card animate-fade-in",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Ge,{size:16,className:"text-indigo-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Account Configuration"})]}),e.jsxs("div",{className:"card-body space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(M,{label:"Account Name",children:e.jsx("input",{type:"text",value:r.name,onChange:a=>i("name",a.target.value),className:"input-base",placeholder:"e.g. FTMO $100k"})}),e.jsx(M,{label:"Account Balance",hint:"USD",children:e.jsx(S,{value:r.accountBalance,onChange:a=>i("accountBalance",a),min:1e3,step:1e3,prefix:"$"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(M,{label:"Daily Drawdown",hint:"% of balance",children:e.jsx(S,{value:r.dailyDrawdownPct,onChange:a=>i("dailyDrawdownPct",Math.min(a,100)),min:.1,max:100,step:.5,suffix:"%"})}),e.jsx(M,{label:"Max Drawdown",hint:"% of balance",children:e.jsx(S,{value:r.maxDrawdownPct,onChange:a=>i("maxDrawdownPct",Math.min(a,100)),min:.1,max:100,step:.5,suffix:"%"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(M,{label:"Profit Target",hint:"% of balance",children:e.jsx(S,{value:r.profitTargetPct,onChange:a=>i("profitTargetPct",Math.min(a,100)),min:.1,max:100,step:.5,suffix:"%"})}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"consistency-rule-enabled",checked:r.consistencyRuleEnabled,onChange:a=>i("consistencyRuleEnabled",a.target.checked),className:"w-3.5 h-3.5 rounded accent-indigo-500 cursor-pointer flex-shrink-0"}),e.jsx("label",{htmlFor:"consistency-rule-enabled",className:"text-xs font-medium uppercase tracking-wide cursor-pointer select-none text-slate-400",children:"Consistency Rule"})]}),e.jsx("div",{className:r.consistencyRuleEnabled?"":"opacity-40 pointer-events-none",children:e.jsx(S,{value:r.consistencyRulePct,onChange:a=>i("consistencyRulePct",Math.min(a,100)),min:1,max:100,step:1,suffix:"%"})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Max daily % of target"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(M,{label:"Win Rate",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{value:r.winRate,onChange:a=>i("winRate",Math.min(Math.max(a,1),99)),min:1,max:99,step:1,suffix:"%"}),e.jsx("input",{type:"range",min:1,max:99,step:1,value:r.winRate,onChange:a=>i("winRate",parseFloat(a.target.value)),className:"w-full h-1.5 bg-slate-700 rounded-full appearance-none cursor-pointer accent-indigo-500"})]})}),e.jsx(M,{label:"Risk:Reward Ratio",hint:"e.g. 1.5 = 1:1.5",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{value:r.riskRewardRatio,onChange:a=>i("riskRewardRatio",Math.max(a,.1)),min:.1,max:20,step:.1,prefix:"1:"}),e.jsx("input",{type:"range",min:.1,max:10,step:.1,value:r.riskRewardRatio,onChange:a=>i("riskRewardRatio",parseFloat(a.target.value)),className:"w-full h-1.5 bg-slate-700 rounded-full appearance-none cursor-pointer accent-indigo-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(M,{label:"Trades per Day",children:e.jsx(S,{value:r.tradesPerDay,onChange:a=>i("tradesPerDay",Math.max(1,Math.floor(a))),min:1,max:100,step:1})}),e.jsx(M,{label:"Risk Mode",children:e.jsx(es,{value:r.mode,onChange:a=>{a==="custom"&&r.customRiskPerTrade===0?s({...r,mode:a,customRiskPerTrade:Math.round(t)}):i("mode",a)},options:ss})})]}),r.mode==="custom"&&e.jsxs("div",{className:"rounded-lg border border-indigo-700/50 bg-indigo-950/30 p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{size:14,className:"text-indigo-400"}),e.jsx("span",{className:"text-xs font-semibold text-indigo-300",children:"Custom Risk Per Trade"})]}),e.jsx(M,{label:"Risk Amount",hint:`Recommended safe range: up to ${f(t*1.2)}`,children:e.jsx(S,{value:r.customRiskPerTrade,onChange:a=>i("customRiskPerTrade",Math.max(0,a)),min:0,step:10,prefix:"$"})}),e.jsx("input",{type:"range",min:0,max:Math.round(t*3),step:Math.max(1,Math.round(t/50)),value:r.customRiskPerTrade,onChange:a=>i("customRiskPerTrade",parseFloat(a.target.value)),className:"w-full h-1.5 bg-slate-700 rounded-full appearance-none cursor-pointer accent-indigo-500"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"$0"}),e.jsxs("span",{className:"text-indigo-400",children:["Safe: ",f(t)]}),e.jsx("span",{children:f(t*3)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2 uppercase tracking-wide",children:"Quick Presets"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:as.map(a=>e.jsx("button",{onClick:()=>s({...r,...a.values}),className:"text-xs px-3 py-1.5 rounded-md bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 transition-colors",children:a.label},a.label))})]})]})]})}const as=[{label:"FTMO $25k",values:{accountBalance:25e3,dailyDrawdownPct:5,maxDrawdownPct:10,profitTargetPct:10,consistencyRulePct:30}},{label:"FTMO $100k",values:{accountBalance:1e5,dailyDrawdownPct:5,maxDrawdownPct:10,profitTargetPct:10,consistencyRulePct:30}},{label:"Funded Trader",values:{accountBalance:5e4,dailyDrawdownPct:4,maxDrawdownPct:8,profitTargetPct:8,consistencyRulePct:40}},{label:"TopStep $50k",values:{accountBalance:5e4,dailyDrawdownPct:2,maxDrawdownPct:3,profitTargetPct:6,consistencyRulePct:50}}];function T({label:r,value:s,sub:i,color:t="text-slate-100",icon:a,highlight:n}){return e.jsxs("div",{className:`metric-card ${n?"border-indigo-700/50 bg-indigo-950/30":""}`,children:[a&&e.jsx("div",{className:"text-slate-500 mb-2",children:a}),e.jsx("p",{className:"metric-label",children:r}),e.jsx("p",{className:`metric-value ${t}`,children:s}),i&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:i})]})}function rs({results:r,config:s}){const{dailyDD:i,maxDD:t,profitTarget:a,maxDailyProfit:n,baseRisk:d,safeRiskPerTrade:c,rewardPerTrade:h,expectancy:m,estimatedTradesToTarget:u,estimatedDaysToTarget:o,riskOfRuin:l,riskPct:x,warnings:p}=r,j=m>0?"text-emerald-400":"text-red-400",v=l<5?"text-emerald-400":l<20?"text-amber-400":"text-red-400",D=p.some(R=>R.type==="danger"),N=s.mode==="conservative"?"÷1.5":s.mode==="aggressive"?"×1.2":"×1.0";return e.jsxs("div",{className:"card animate-slide-up",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(H,{size:16,className:"text-indigo-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Risk Analysis Results"}),D&&e.jsx("span",{className:"ml-auto badge bg-red-900/60 text-red-400 border border-red-800 animate-pulse",children:"Risk Alert"})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsxs("section",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2 font-medium",children:"Drawdown Limits"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(T,{label:"Daily Drawdown",value:f(i),sub:`${s.dailyDrawdownPct}% of balance`,icon:e.jsx(G,{size:14})}),e.jsx(T,{label:"Max Drawdown",value:f(t),sub:`${s.maxDrawdownPct}% of balance`,icon:e.jsx(G,{size:14})})]})]}),e.jsxs("section",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2 font-medium",children:"Profit Targets"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(T,{label:"Profit Target",value:f(a),sub:`${s.profitTargetPct}% of balance`,color:"text-emerald-400",icon:e.jsx(te,{size:14})}),e.jsx(T,{label:"Max Daily Profit",value:s.consistencyRuleEnabled?f(n):"Unlimited",sub:s.consistencyRuleEnabled?`Consistency rule ${s.consistencyRulePct}%`:"Consistency rule off",color:s.consistencyRuleEnabled?"text-slate-100":"text-slate-500",icon:e.jsx(te,{size:14})})]})]}),e.jsxs("section",{children:[e.jsxs("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2 font-medium",children:["Position Sizing — Mode: ",e.jsxs("span",{className:"text-indigo-400",children:[s.mode," (",N,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(T,{label:"Base Risk/Trade",value:f(d),sub:"min(MaxDD/5, DD/3, MaxDD/8)",icon:e.jsx(se,{size:14})}),e.jsx(T,{label:"Adjusted Risk/Trade",value:f(c),sub:`${k(x)} of account`,color:x>2?"text-amber-400":"text-indigo-400",icon:e.jsx(se,{size:14}),highlight:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsx(T,{label:"Reward/Trade",value:f(h),sub:`1:${s.riskRewardRatio} R:R`,color:"text-emerald-400",icon:e.jsx(q,{size:14})}),e.jsx(T,{label:"Risk % of Account",value:k(x),sub:"per trade",color:x>2?"text-red-400":x>1?"text-amber-400":"text-emerald-400",icon:e.jsx(_e,{size:14})})]})]}),e.jsxs("section",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2 font-medium",children:"Edge & Expectancy"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(T,{label:"Expected Value/Trade",value:f(m),sub:"(WR × Reward) − (LR × Risk)",color:j,icon:e.jsx(Xe,{size:14}),highlight:!0}),e.jsx(T,{label:"Risk of Ruin",value:k(l),sub:"probability of blowout",color:v,icon:e.jsx(G,{size:14})})]})]}),e.jsxs("section",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2 font-medium",children:"Time to Target"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(T,{label:"Est. Trades",value:u===1/0?"∞":A(u),sub:"to reach profit target",color:m>0?"text-slate-100":"text-red-400",icon:e.jsx(H,{size:14})}),e.jsx(T,{label:"Est. Trading Days",value:o===1/0?"∞":A(o),sub:`at ${s.tradesPerDay} trades/day`,color:m>0?"text-slate-100":"text-red-400",icon:e.jsx(xe,{size:14})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-slate-400",children:"Risk of Ruin"}),e.jsx("span",{className:v,children:k(l)})]}),e.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${l<5?"bg-emerald-500":l<20?"bg-amber-500":"bg-red-500"}`,style:{width:`${Math.min(l,100)}%`}})})]}),m>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-slate-400",children:"Probability of Positive EV"}),e.jsx("span",{className:"text-emerald-400",children:"Positive"})]}),e.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all duration-500",style:{width:`${s.winRate}%`}})})]})]})]})}const ns={danger:{Icon:ue,bg:"bg-red-950/60",border:"border-red-800/60",text:"text-red-300",icon:"text-red-400",label:"Danger"},warning:{Icon:$e,bg:"bg-amber-950/60",border:"border-amber-800/60",text:"text-amber-300",icon:"text-amber-400",label:"Warning"},info:{Icon:Be,bg:"bg-sky-950/60",border:"border-sky-800/60",text:"text-sky-300",icon:"text-sky-400",label:"Info"}};function is({warnings:r}){return r.length===0?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center gap-3 text-emerald-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"No risk warnings — configuration looks healthy."})]})})}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(ue,{size:16,className:"text-red-400"}),e.jsxs("h2",{className:"text-sm font-semibold text-slate-100",children:["Risk Warnings",e.jsx("span",{className:"ml-2 badge bg-red-900/60 text-red-400 border border-red-800",children:r.length})]})]}),e.jsx("div",{className:"card-body space-y-2",children:r.map((s,i)=>{const{Icon:t,bg:a,border:n,text:d,icon:c,label:h}=ns[s.type];return e.jsxs("div",{className:`flex gap-3 p-3 rounded-lg border ${a} ${n}`,children:[e.jsx(t,{size:16,className:`${c} flex-shrink-0 mt-0.5`}),e.jsxs("div",{children:[e.jsxs("span",{className:`text-xs font-bold uppercase tracking-wide ${c}`,children:[h,": "]}),e.jsx("span",{className:`text-xs ${d}`,children:s.message})]})]},i)})})]})}const ae=30,ls=2e4;function pe(r,s=1e3){const i=U(r),{safeRiskPerTrade:t,rewardPerTrade:a,profitTarget:n,maxDD:d,dailyDD:c}=i,h=r.tradesPerDay;let m=0;const u=[],o=[];for(let b=0;b<s;b++){let w=0,C=0,F=!1;const z=[0];let P=0,$=0;for(;C<ls;){$===0&&(P=w),C++,$++;const O=Math.random()<r.winRate/100;if(w+=O?a:-t,b<ae&&z.push(w),w>=n){F=!0;break}if(w<=-d||w<=P-c)break;$>=h&&($=0)}F&&(m++,u.push(C)),b<ae&&o.push(z)}const l=m/s*100,x=[...u].sort((b,w)=>b-w),p=x.length>0?x[Math.floor(x.length/2)]:0,j=x[Math.floor(x.length*.1)]??0,v=x[Math.floor(x.length*.9)]??0,D=p>0?Math.ceil(p/h):0,N=Math.max(...o.map(b=>b.length),1),R=[];for(let b=0;b<N;b++){const w=o.map(C=>C[Math.min(b,C.length-1)]).sort((C,F)=>C-F);R.push(w[Math.floor(w.length/2)])}return{successRate:l,medianTrades:p,medianDays:D,percentile10Trades:j,percentile90Trades:v,equityCurves:o,medianEquityCurve:R,profitTarget:n,maxDD:d}}function re(r,s){const{safeRiskPerTrade:i,maxDD:t,dailyDD:a}=U(r),n=s*i,d=n/r.accountBalance*100,c=r.accountBalance-n,h=t-n,m=(t-n)/r.accountBalance*100;return{accountAfterLosses:c,drawdownAmount:n,drawdownPct:d,remainingBuffer:h,remainingPct:m,isDangerous:h<t*.3,hitMaxDD:n>=t,dailyDD:a}}const E=1e3;function cs({config:r,mcResult:s,onResult:i}){const[t,a]=g.useState(!1),n=()=>{a(!0),setTimeout(()=>{const m=pe(r,E);i(m),a(!1)},50)},d=g.useMemo(()=>{if(!s)return[];const{equityCurves:m,medianEquityCurve:u}=s,o=Math.max(u.length,1);return Array.from({length:o},(l,x)=>{const p={step:x,median:u[x]};return m.forEach((j,v)=>{p[`run${v}`]=j[Math.min(x,j.length-1)]}),p})},[s]),c=g.useMemo(()=>s?s.equityCurves.map((m,u)=>`run${u}`):[],[s]),h=s?s.successRate>=70?"#10b981":s.successRate>=50?"#f59e0b":"#ef4444":"#6366f1";return e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(B,{size:16,className:"text-indigo-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Monte Carlo Simulation"}),e.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:[E.toLocaleString()," runs"]})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsxs("p",{className:"text-sm text-slate-400",children:["Simulates ",E.toLocaleString()," randomized trading sequences using your current configuration. Each run plays out until the profit target is reached or a drawdown limit is hit."]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:n,disabled:t,className:"btn-primary",children:[e.jsx(B,{size:15}),t?"Simulating…":s?"Re-run Simulation":"Run Simulation"]}),t&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),"Computing…"]})]})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"metric-card text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:s.successRate>=60?e.jsx(de,{size:20,className:"text-emerald-400"}):e.jsx(Ee,{size:20,className:"text-red-400"})}),e.jsx("p",{className:"metric-label",children:"Success Rate"}),e.jsx("p",{className:"metric-value",style:{color:h},children:k(s.successRate,1)}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["of ",E," runs"]})]}),e.jsxs("div",{className:"metric-card text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(q,{size:20,className:"text-indigo-400"})}),e.jsx("p",{className:"metric-label",children:"Median Trades"}),e.jsx("p",{className:"metric-value",children:s.medianTrades>0?A(s.medianTrades):"N/A"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"to reach target"})]}),e.jsxs("div",{className:"metric-card text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(xe,{size:20,className:"text-sky-400"})}),e.jsx("p",{className:"metric-label",children:"Median Days"}),e.jsx("p",{className:"metric-value text-sky-400",children:s.medianDays>0?A(s.medianDays):"N/A"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"trading days"})]}),e.jsxs("div",{className:"metric-card text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(B,{size:20,className:"text-amber-400"})}),e.jsx("p",{className:"metric-label",children:"Range (P10–P90)"}),e.jsxs("p",{className:"metric-value text-amber-400 text-base",children:[s.percentile10Trades>0?A(s.percentile10Trades):"—"," – ",s.percentile90Trades>0?A(s.percentile90Trades):"—"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"trades (success only)"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(q,{size:16,className:"text-indigo-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Simulated Equity Curves"}),e.jsxs("span",{className:"ml-auto text-xs text-slate-500",children:["Showing ",s.equityCurves.length," sample paths + median"]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(J,{width:"100%",height:320,children:e.jsxs(ge,{data:d,margin:{top:8,right:16,left:16,bottom:8},children:[e.jsx(K,{strokeDasharray:"3 3",stroke:"#1e293b"}),e.jsx(X,{dataKey:"step",tick:{fill:"#64748b",fontSize:11},label:{value:"Trade #",position:"insideBottom",offset:-4,fill:"#64748b",fontSize:11}}),e.jsx(Z,{tickFormatter:m=>f(m),tick:{fill:"#64748b",fontSize:10},width:80}),e.jsx(Y,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8,fontSize:12},labelStyle:{color:"#94a3b8"},formatter:(m,u)=>u==="median"?[f(m),"Median"]:[f(m),`Run ${u.replace("run","")}`],itemStyle:{display:"none"},labelFormatter:m=>`Trade ${m}`}),e.jsx(L,{y:s.profitTarget,stroke:"#10b981",strokeDasharray:"4 4",label:{value:"Target",fill:"#10b981",fontSize:11,position:"right"}}),e.jsx(L,{y:-s.maxDD,stroke:"#ef4444",strokeDasharray:"4 4",label:{value:"Max DD",fill:"#ef4444",fontSize:11,position:"right"}}),c.map(m=>e.jsx(Q,{dataKey:m,stroke:"#6366f1",strokeWidth:1,strokeOpacity:.12,dot:!1,isAnimationActive:!1,legendType:"none"},m)),e.jsx(Q,{dataKey:"median",stroke:"#22d3ee",strokeWidth:2.5,dot:!1,isAnimationActive:!1,name:"median"}),e.jsx(be,{wrapperStyle:{fontSize:11,paddingTop:8},formatter:m=>m==="median"?"Median Equity Curve":""})]})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[e.jsxs("span",{className:"text-slate-400",children:["Success Rate (",E," runs)"]}),e.jsx("span",{style:{color:h},children:k(s.successRate,1)})]}),e.jsx("div",{className:"h-3 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${s.successRate}%`,backgroundColor:h}})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1.5",children:s.successRate>=70?"✓ Good probability of passing the challenge.":s.successRate>=50?"⚠ Moderate risk — consider adjusting parameters.":"✗ High probability of failure — review your setup."})]})]})]})]})]})}function os({config:r,results:s}){const[i,t]=g.useState(5),a=re(r,i),n=Math.ceil(s.maxDD/s.safeRiskPerTrade)+2,d=Array.from({length:Math.min(n+1,30)},(u,o)=>{const l=re(r,o);return{losses:o,drawdown:l.drawdownAmount,remaining:Math.max(l.remainingBuffer,0),account:l.accountAfterLosses}}),c=a.hitMaxDD?"#ef4444":a.isDangerous?"#f59e0b":"#6366f1",h=a.hitMaxDD?"MAX DRAWDOWN BREACHED":a.isDangerous?"DANGER ZONE":"Safe",m=a.hitMaxDD?"text-red-400":a.isDangerous?"text-amber-400":"text-emerald-400";return e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(me,{size:16,className:"text-amber-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Losing Streak Simulator"})]}),e.jsxs("div",{className:"card-body space-y-5",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"See the drawdown impact of consecutive losing trades on your account."}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-xs font-medium text-slate-400 uppercase tracking-wide",children:"Consecutive Losses"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(Math.max(0,i-1)),className:"w-7 h-7 rounded-md bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 text-sm flex items-center justify-center",children:"−"}),e.jsx("span",{className:"text-xl font-bold font-mono w-8 text-center",children:i}),e.jsx("button",{onClick:()=>t(Math.min(30,i+1)),className:"w-7 h-7 rounded-md bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 text-sm flex items-center justify-center",children:"+"})]})]}),e.jsx("input",{type:"range",min:0,max:30,value:i,onChange:u=>t(parseInt(u.target.value)),className:"w-full h-2 bg-slate-700 rounded-full appearance-none cursor-pointer accent-indigo-500"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mt-1",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"15"}),e.jsx("span",{children:"30"})]})]}),e.jsx("div",{className:`p-3 rounded-lg border text-center ${a.hitMaxDD?"bg-red-950/60 border-red-800":a.isDangerous?"bg-amber-950/60 border-amber-800":"bg-emerald-950/40 border-emerald-800/40"}`,children:e.jsx("span",{className:`text-sm font-bold ${m}`,children:h})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"metric-label",children:"Drawdown Amount"}),e.jsx("p",{className:"metric-value text-red-400",children:f(a.drawdownAmount)}),e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:[k(a.drawdownPct)," of balance"]})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("p",{className:"metric-label",children:"Account Balance"}),e.jsx("p",{className:`metric-value ${a.hitMaxDD?"text-red-400":"text-slate-100"}`,children:f(a.accountAfterLosses)}),e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["after ",i," losses"]})]}),e.jsxs("div",{className:"metric-card col-span-2 md:col-span-1",children:[e.jsx("p",{className:"metric-label",children:"Remaining Buffer"}),e.jsx("p",{className:`metric-value ${a.isDangerous?"text-amber-400":"text-emerald-400"}`,children:a.remainingBuffer>0?f(a.remainingBuffer):"$0"}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:a.remainingBuffer>0?`${k(a.remainingPct)} of balance`:"Exceeded!"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-slate-400",children:"Max Drawdown Used"}),e.jsx("span",{style:{color:c},children:k(Math.min(a.drawdownAmount/s.maxDD*100,100))})]}),e.jsx("div",{className:"h-3 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${Math.min(a.drawdownAmount/s.maxDD*100,100)}%`,backgroundColor:c}})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mt-1",children:[e.jsx("span",{children:"$0"}),e.jsxs("span",{children:[f(s.maxDD)," (Max DD)"]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-400",children:"Risk per trade:"}),e.jsx("span",{className:"text-mono text-slate-200",children:f(s.safeRiskPerTrade)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-400",children:"Trades to hit MaxDD:"}),e.jsxs("span",{className:"text-mono text-red-400",children:["~",Math.floor(s.maxDD/s.safeRiskPerTrade)," losses"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-400",children:"Trades to hit DailyDD:"}),e.jsxs("span",{className:"text-mono text-amber-400",children:["~",Math.floor(s.dailyDD/s.safeRiskPerTrade)," losses"]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(Je,{size:16,className:"text-red-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Drawdown vs. Streak Length"})]}),e.jsx("div",{className:"card-body",children:e.jsx(J,{width:"100%",height:260,children:e.jsxs(ve,{data:d,margin:{top:8,right:16,left:16,bottom:8},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"ddGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.25}),e.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.02})]})}),e.jsx(K,{strokeDasharray:"3 3",stroke:"#1e293b"}),e.jsx(X,{dataKey:"losses",tick:{fill:"#64748b",fontSize:11},label:{value:"Consecutive Losses",position:"insideBottom",offset:-4,fill:"#64748b",fontSize:11}}),e.jsx(Z,{tickFormatter:u=>f(u),tick:{fill:"#64748b",fontSize:10},width:80}),e.jsx(Y,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8,fontSize:12},formatter:u=>[f(u),"Drawdown"],labelFormatter:u=>`${u} losses`}),e.jsx(L,{y:s.maxDD,stroke:"#ef4444",strokeDasharray:"4 4",label:{value:"Max DD",fill:"#ef4444",fontSize:11,position:"right"}}),e.jsx(L,{y:s.dailyDD,stroke:"#f59e0b",strokeDasharray:"4 4",label:{value:"Daily DD",fill:"#f59e0b",fontSize:11,position:"right"}}),e.jsx(L,{x:i,stroke:"#6366f1",strokeDasharray:"3 3"}),e.jsx(Ne,{type:"monotone",dataKey:"drawdown",stroke:"#ef4444",strokeWidth:2,fill:"url(#ddGrad)"})]})})})]})]})}function ds(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=Math.random()*16|0;return(r==="x"?s:s&3|8).toString(16)})}const I=["#6366f1","#22d3ee","#10b981","#f59e0b","#f43f5e"];function xs({baseConfig:r,accounts:s,onAccountsChange:i}){const[t,a]=g.useState([]),[n,d]=g.useState(!1),c=[{...r,name:`${r.name} (current)`},...s],h=()=>{const l={..._,id:ds(),name:`Account ${s.length+2}`};i([...s,l])},m=l=>{i(s.filter(x=>x.id!==l)),a(x=>x.filter(p=>p.id!==l))},u=(l,x,p)=>{i(s.map(j=>j.id===l?{...j,[x]:p}:j))},o=()=>{d(!0),setTimeout(()=>{const l=c.map(x=>{const p=U(x),j=pe(x,500);return{id:x.id,name:x.name,successRate:j.successRate,medianDays:j.medianDays,riskPerTrade:p.safeRiskPerTrade,expectancy:p.expectancy,riskOfRuin:p.riskOfRuin}});a(l),d(!1)},50)};return e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(V,{size:16,className:"text-indigo-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Multi-Account Comparison"})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Compare your current account configuration against alternative setups. The current account is always included automatically."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-indigo-950/30 border border-indigo-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-semibold text-indigo-400",children:[r.name," (current)"]}),e.jsx("span",{className:"badge bg-indigo-900/60 text-indigo-400 border border-indigo-800",children:"Active"})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-1.5 text-xs text-slate-400",children:[e.jsxs("span",{children:["Balance: ",f(r.accountBalance)]}),e.jsxs("span",{children:["MaxDD: ",r.maxDrawdownPct,"%"]}),e.jsxs("span",{children:["Target: ",r.profitTargetPct,"%"]}),e.jsxs("span",{children:["WR: ",r.winRate,"%"]}),e.jsxs("span",{children:["RR: 1:",r.riskRewardRatio]})]})]}),s.map((l,x)=>e.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:p=>u(l.id,"name",p.target.value),className:"bg-transparent text-xs font-semibold text-slate-300 border-none outline-none w-40"}),e.jsx("button",{onClick:()=>m(l.id),className:"text-slate-600 hover:text-red-400 transition-colors",children:e.jsx(Ve,{size:14})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[{label:"Balance",key:"accountBalance",prefix:"$",step:1e3,min:1e3},{label:"MaxDD %",key:"maxDrawdownPct",suffix:"%",step:.5,min:.1},{label:"DailyDD %",key:"dailyDrawdownPct",suffix:"%",step:.5,min:.1},{label:"Target %",key:"profitTargetPct",suffix:"%",step:.5,min:.1},{label:"Win Rate",key:"winRate",suffix:"%",step:1,min:1},{label:"R:R",key:"riskRewardRatio",prefix:"1:",step:.1,min:.1}].map(({label:p,key:j,prefix:v,suffix:D,step:N,min:R})=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:p}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[v&&e.jsx("span",{className:"text-xs text-slate-500",children:v}),e.jsx("input",{type:"number",value:l[j],min:R,step:N,onChange:b=>{const w=parseFloat(b.target.value);isNaN(w)||u(l.id,j,w)},className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-xs text-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),D&&e.jsx("span",{className:"text-xs text-slate-500",children:D})]})]},j))}),e.jsxs("div",{className:"mt-1.5 text-xs text-slate-600",children:["Account ",x+2]})]},l.id))]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.length<4&&e.jsxs("button",{onClick:h,className:"btn-secondary",children:[e.jsx(We,{size:14}),"Add Account"]}),e.jsxs("button",{onClick:o,disabled:n,className:"btn-primary",children:[e.jsx(qe,{size:14}),n?"Comparing…":"Run Comparison"]})]})]})]}),t.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(V,{size:16,className:"text-indigo-400"}),e.jsx("h2",{className:"text-sm font-semibold text-slate-100",children:"Comparison Results (500 runs each)"})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-slate-800 text-left",children:["Account","Success Rate","Median Days","Risk/Trade","Expectancy","RoR"].map(l=>e.jsx("th",{className:"pb-2 pr-4 text-xs text-slate-500 uppercase tracking-wide font-medium whitespace-nowrap",children:l},l))})}),e.jsx("tbody",{className:"divide-y divide-slate-800/50",children:t.map((l,x)=>e.jsxs("tr",{className:"text-sm",children:[e.jsx("td",{className:"py-2.5 pr-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{background:I[x%I.length]}}),e.jsx("span",{className:"text-slate-200 font-medium whitespace-nowrap",children:l.name})]})}),e.jsx("td",{className:"py-2.5 pr-4",children:e.jsx("span",{className:`font-mono font-medium ${l.successRate>=70?"text-emerald-400":l.successRate>=50?"text-amber-400":"text-red-400"}`,children:k(l.successRate,1)})}),e.jsx("td",{className:"py-2.5 pr-4 font-mono text-slate-300",children:l.medianDays>0?A(l.medianDays):"N/A"}),e.jsx("td",{className:"py-2.5 pr-4 font-mono text-slate-300",children:f(l.riskPerTrade)}),e.jsx("td",{className:"py-2.5 pr-4",children:e.jsx("span",{className:`font-mono font-medium ${l.expectancy>0?"text-emerald-400":"text-red-400"}`,children:f(l.expectancy)})}),e.jsx("td",{className:"py-2.5 font-mono",children:e.jsx("span",{className:l.riskOfRuin<10?"text-emerald-400":l.riskOfRuin<25?"text-amber-400":"text-red-400",children:k(l.riskOfRuin,1)})})]},l.id))})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-3",children:"Success Rate Comparison"}),e.jsx(J,{width:"100%",height:200,children:e.jsxs(we,{data:t,margin:{top:4,right:16,left:0,bottom:4},children:[e.jsx(K,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1}),e.jsx(X,{dataKey:"name",tick:{fill:"#64748b",fontSize:10},tickFormatter:l=>l.length>12?l.slice(0,12)+"…":l}),e.jsx(Z,{domain:[0,100],tickFormatter:l=>`${l}%`,tick:{fill:"#64748b",fontSize:10}}),e.jsx(Y,{contentStyle:{background:"#1e293b",border:"1px solid #334155",borderRadius:8,fontSize:12},formatter:l=>[`${l.toFixed(1)}%`,"Success Rate"]}),e.jsx(ke,{dataKey:"successRate",radius:[4,4,0,0],children:t.map((l,x)=>e.jsx(De,{fill:I[x%I.length]},x))})]})})]})]})]})]})}const ms="modulepreload",us=function(r){return"/propfirm-calculator/"+r},ne={},fe=function(s,i,t){let a=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(i.map(h=>{if(h=us(h),h in ne)return;ne[h]=!0;const m=h.endsWith(".css"),u=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${u}`))return;const o=document.createElement("link");if(o.rel=m?"stylesheet":ms,m||(o.as="script"),o.crossOrigin="",o.href=h,c&&o.setAttribute("nonce",c),document.head.appendChild(o),m)return new Promise((l,x)=>{o.addEventListener("load",l),o.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return a.then(d=>{for(const c of d||[])c.status==="rejected"&&n(c.reason);return s().catch(n)})};async function hs(r,s){const{jsPDF:i}=await fe(async()=>{const{jsPDF:o}=await import("./jspdf.es.min-LzL3yn4x.js").then(l=>l.j);return{jsPDF:o}},[]),t=new i({orientation:"portrait",unit:"mm",format:"a4"}),a=210,n=20,d=(a-n*2)/2;let c=20;t.setFillColor(15,23,42),t.rect(0,0,a,36,"F"),t.setTextColor(99,102,241),t.setFontSize(18),t.setFont("helvetica","bold"),t.text("PropFirm Risk Calculator",n,14),t.setFontSize(10),t.setTextColor(148,163,184),t.setFont("helvetica","normal"),t.text(`Account: ${r.name}`,n,22),t.text(`Generated: ${new Date().toLocaleDateString()}`,n,28),c=46,t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(30,30,30),t.text("Account Configuration",n,c),c+=6,t.setDrawColor(99,102,241),t.setLineWidth(.5),t.line(n,c,a-n,c),c+=6,t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(50,50,50);const h=r.mode==="custom"?`Custom ($${r.customRiskPerTrade.toFixed(0)}/trade)`:r.mode.charAt(0).toUpperCase()+r.mode.slice(1),m=[["Account Balance",f(r.accountBalance),"Risk Mode",h],["Daily Drawdown",k(r.dailyDrawdownPct),"Max Drawdown",k(r.maxDrawdownPct)],["Profit Target",k(r.profitTargetPct),"Consistency Rule",k(r.consistencyRulePct)],["Win Rate",k(r.winRate),"Risk:Reward",`1:${r.riskRewardRatio}`],["Trades/Day",String(r.tradesPerDay),"",""]];for(const[o,l,x,p]of m)t.setFont("helvetica","bold"),t.text(`${o}:`,n,c),t.setFont("helvetica","normal"),t.text(l,n+35,c),t.setFont("helvetica","bold"),t.text(`${x}:`,n+d,c),t.setFont("helvetica","normal"),t.text(p,n+d+35,c),c+=7;c+=4,t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(30,30,30),t.text("Calculated Risk Metrics",n,c),c+=6,t.line(n,c,a-n,c),c+=6;const u=[["Daily Drawdown ($)",f(s.dailyDD),"Max Drawdown ($)",f(s.maxDD)],["Profit Target ($)",f(s.profitTarget),"Max Daily Profit",f(s.maxDailyProfit)],["Base Risk/Trade",f(s.baseRisk),"Adjusted Risk/Trade",f(s.safeRiskPerTrade)],["Reward/Trade",f(s.rewardPerTrade),"Risk % of Account",k(s.riskPct)],["Expectancy",f(s.expectancy),"Risk of Ruin",k(s.riskOfRuin)],["Est. Trades to Target",A(s.estimatedTradesToTarget),"Est. Days to Target",A(s.estimatedDaysToTarget)]];t.setFontSize(9);for(const[o,l,x,p]of u)t.setFont("helvetica","bold"),t.setTextColor(50,50,50),t.text(`${o}:`,n,c),t.setFont("helvetica","normal"),t.text(l,n+40,c),t.setFont("helvetica","bold"),t.text(`${x}:`,n+d,c),t.setFont("helvetica","normal"),t.text(p,n+d+40,c),c+=7;if(c+=4,s.warnings.length>0){t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(30,30,30),t.text("Risk Warnings",n,c),c+=6,t.line(n,c,a-n,c),c+=6,t.setFontSize(9);for(const o of s.warnings){const l=o.type==="danger"?[239,68,68]:o.type==="warning"?[245,158,11]:[99,102,241];t.setTextColor(...l),t.setFont("helvetica","bold");const x=o.type==="danger"?"⚠ DANGER":o.type==="warning"?"⚠ WARNING":"ℹ INFO";t.text(x,n,c),t.setFont("helvetica","normal"),t.setTextColor(50,50,50);const p=t.splitTextToSize(o.message,a-n*2-20);t.text(p,n+20,c),c+=6*p.length+2}}t.setFontSize(8),t.setTextColor(150,150,150),t.setFont("helvetica","normal"),t.text("Generated by PropFirm Risk Calculator — For educational purposes only. Not financial advice.",n,285),t.save(`risk-analysis-${r.name.replace(/\s+/g,"-").toLowerCase()}.pdf`)}function ps({config:r,results:s,onImport:i}){const t=g.useRef(null),[a,n]=g.useState(!1),[d,c]=g.useState(!1),[h,m]=g.useState(!1),u=()=>{const x=JSON.stringify({version:"1.0",config:r},null,2),p=new Blob([x],{type:"application/json"}),j=URL.createObjectURL(p),v=document.createElement("a");v.href=j,v.download=`risk-config-${r.name.replace(/\s+/g,"-").toLowerCase()}.json`,v.click(),URL.revokeObjectURL(j),c(!0),setTimeout(()=>c(!1),2e3)},o=x=>{var v;const p=(v=x.target.files)==null?void 0:v[0];if(!p)return;const j=new FileReader;j.onload=D=>{var N;try{const R=JSON.parse((N=D.target)==null?void 0:N.result),b=R.config??R;b&&typeof b.accountBalance=="number"?(i(b),n(!1)):alert("Invalid config file format.")}catch{alert("Failed to parse JSON file.")}},j.readAsText(p),x.target.value=""},l=async()=>{m(!0);try{await hs(r,s)}catch(x){console.error("PDF export failed:",x),alert("PDF export failed. Please try again.")}finally{m(!1)}};return e.jsxs("div",{className:"fixed bottom-4 right-4 z-40 flex flex-col items-end gap-2",children:[a&&e.jsx("div",{className:"card shadow-2xl shadow-black/60 animate-slide-up min-w-[180px]",children:e.jsxs("div",{className:"p-3 flex flex-col gap-2",children:[e.jsxs("button",{onClick:u,className:"btn-secondary text-xs w-full justify-start",children:[d?e.jsx(de,{size:13,className:"text-emerald-400"}):e.jsx(Oe,{size:13}),d?"Exported!":"Export JSON"]}),e.jsxs("button",{onClick:()=>{var x;return(x=t.current)==null?void 0:x.click()},className:"btn-secondary text-xs w-full justify-start",children:[e.jsx(Ke,{size:13}),"Import JSON"]}),e.jsxs("button",{onClick:l,disabled:h,className:"btn-secondary text-xs w-full justify-start",children:[e.jsx(Ie,{size:13}),h?"Generating…":"Export PDF"]}),e.jsx("input",{ref:t,type:"file",accept:".json",onChange:o,className:"hidden"})]})}),e.jsx("button",{onClick:()=>n(x=>!x),className:`w-11 h-11 rounded-full shadow-lg shadow-black/50 flex items-center justify-center transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-slate-950 ${a?"bg-slate-700 hover:bg-slate-600 text-slate-300":"bg-indigo-600 hover:bg-indigo-500 text-white"}`,title:a?"Close":"Export / Import",children:a?e.jsx(he,{size:18}):e.jsx(Le,{size:18})})]})}function fs(r={}){const{immediate:s=!1,onNeedRefresh:i,onOfflineReady:t,onRegistered:a,onRegisteredSW:n,onRegisterError:d}=r;let c,h;const m=async(o=!0)=>{await h};async function u(){if("serviceWorker"in navigator){if(c=await fe(async()=>{const{Workbox:o}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:o}},[]).then(({Workbox:o})=>new o("/propfirm-calculator/sw.js",{scope:"/propfirm-calculator/",type:"classic"})).catch(o=>{d==null||d(o)}),!c)return;c.addEventListener("activated",o=>{(o.isUpdate||o.isExternal)&&window.location.reload()}),c.addEventListener("installed",o=>{o.isUpdate||t==null||t()}),c.register({immediate:s}).then(o=>{n?n("/propfirm-calculator/sw.js",o):a==null||a(o)}).catch(o=>{d==null||d(o)})}}return h=u(),m}function ys(r={}){const{immediate:s=!0,onNeedRefresh:i,onOfflineReady:t,onRegistered:a,onRegisteredSW:n,onRegisterError:d}=r,[c,h]=g.useState(!1),[m,u]=g.useState(!1),[o]=g.useState(()=>fs({immediate:s,onOfflineReady(){u(!0),t==null||t()},onNeedRefresh(){h(!0),i==null||i()},onRegistered:a,onRegisteredSW:n,onRegisterError:d}));return{needRefresh:[c,h],offlineReady:[m,u],updateServiceWorker:o}}function js(){const[r,s]=g.useState(!1),{needRefresh:[i],updateServiceWorker:t}=ys({onRegistered(a){a&&setInterval(()=>a.update(),60*60*1e3)}});return!i||r?null:e.jsx("div",{className:"fixed top-14 inset-x-0 z-50 flex justify-center px-4 pt-2 pointer-events-none",children:e.jsxs("div",{className:"pointer-events-auto flex items-center gap-3 bg-indigo-600 text-white text-sm px-4 py-2.5 rounded-xl shadow-lg shadow-indigo-900/40 animate-slide-up",children:[e.jsx(Ue,{size:15,className:"flex-shrink-0"}),e.jsx("span",{children:"New version available"}),e.jsx("button",{onClick:()=>t(!0),className:"ml-1 font-semibold underline underline-offset-2 hover:no-underline focus:outline-none",children:"Update now"}),e.jsx("button",{onClick:()=>s(!0),className:"ml-1 text-indigo-200 hover:text-white focus:outline-none","aria-label":"Dismiss",children:e.jsx(he,{size:14})})]})})}function gs(r,s){const[i,t]=g.useState(()=>{try{const a=window.localStorage.getItem(r);return a?JSON.parse(a):s}catch{return s}});return g.useEffect(()=>{try{window.localStorage.setItem(r,JSON.stringify(i))}catch{}},[r,i]),[i,t]}const bs=[{id:"calculator",label:"Calculator",Icon:H},{id:"montecarlo",label:"Monte Carlo",Icon:B},{id:"losingstreak",label:"Losing Streak",Icon:me},{id:"comparison",label:"Compare",Icon:V}];function vs(){const[r,s]=gs("riskCalcConfig",_),i={..._,...r},t=o=>{s(l=>{const x={..._,...l};return typeof o=="function"?o(x):o})},[a,n]=g.useState("calculator"),[d,c]=g.useState([]),[h,m]=g.useState(null),u=g.useMemo(()=>U(i),[i]);return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col",children:[e.jsx(Qe,{}),e.jsx(js,{}),e.jsx("div",{className:"bg-slate-900/50 border-b border-slate-800 sticky top-14 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("nav",{className:"flex gap-1 py-2 overflow-x-auto scrollbar-none",children:bs.map(({id:o,label:l,Icon:x})=>e.jsxs("button",{onClick:()=>n(o),className:`tab-btn flex items-center gap-1.5 whitespace-nowrap ${a===o?"tab-btn-active":"tab-btn-inactive"}`,children:[e.jsx(x,{size:14}),l]},o))})})}),e.jsxs("main",{className:"flex-1 max-w-7xl mx-auto w-full px-4 py-6 pb-24",children:[a==="calculator"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsx("div",{children:e.jsx(ts,{config:i,onChange:t})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(rs,{results:u,config:i}),e.jsx(is,{warnings:u.warnings})]})]}),a==="montecarlo"&&e.jsx(cs,{config:i,mcResult:h,onResult:m}),a==="losingstreak"&&e.jsx(os,{config:i,results:u}),a==="comparison"&&e.jsx(xs,{baseConfig:i,accounts:d,onAccountsChange:c})]}),e.jsx(ps,{config:i,results:u,onImport:t})]})}ce(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(vs,{})}));export{fe as _};
